import{onboarding as i}from"../web_modules/onboarding-plotly.js";function p(){Plotly.d3.csv("./data/oslo-2018.csv",function(n){const{x:o,y:l}=m(n);h(o,l).then(e=>{i("horizon-graph",e)})})}function m(n){const o=[],l=[],e=[],s=[];for(let a=0;a<n.length;a++){const t=n[a],r=`${t.year}-${t.month}`;(e.push(`${t.year}-${t.month}-${t.day}`),s.push(t.temp),o.includes(r))?l[o.indexOf(r)].push(parseFloat(t.temp)):(o.push(`${t.year}-${t.month}`),l.push([parseFloat(t.temp)]))}return{x:o,y:l.map(a=>a.reduce((t,r)=>t+r,0)/a.length)}}function h(n,o){document.getElementById("plot");const l=[{name:"Between 0 and 15 째C",type:"scatter",x:n,y:o.map(e=>e<0?0:e>15?15:e),fill:"tozeroy",fillcolor:"rgba(161, 215, 106, 0.6)",mode:"none",line:{shape:"spline",smoothing:.25},hovertemplate:"%{y:.2f}"},{name:"More than 15 째C",type:"scatter",x:n,y:o.map(e=>e>15?e-15:0),fill:"tozeroy",fillcolor:"rgba(161, 215, 106, 1)",mode:"none",line:{shape:"spline",smoothing:.25},hovertemplate:"%{y:.2f}"},{name:"Less than 0 째C",type:"scatter",x:n,y:o.map(e=>e<0?-1*e:0),fill:"tozeroy",fillcolor:"rgba(5, 113, 176, 1)",mode:"none",line:{shape:"spline",smoothing:.25},hovertemplate:"-%{y:.2f}"}];return Plotly.newPlot("vis",l,{title:"Average temperature in Oslo, Norway in 2018",xaxis:{title:"Month",tickformat:"%m",nticks:12},yaxis:{title:"Average temperature in 째C"},showlegend:!1})}p();
