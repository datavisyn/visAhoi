import{ahoi as c,EVisualizationType as m}from"../web_modules/@visahoi/plotly.js";import{importCsv as y}from"./util.js";async function u(){const n=await y("./data/oslo-2018.csv"),{x:o,y:a}=h(n),s=await f(o,a);window.addEventListener("resize",()=>setTimeout(()=>c(m.HORIZON_GRAPH,s,"#onboarding"),100)),c(m.HORIZON_GRAPH,s,"#onboarding")}function h(n){const o=[],a=[],s=[],r=[];for(let i=0;i<n.length;i++){const e=n[i],l=`${e.year}-${e.month}`;if(s.push(`${e.year}-${e.month}-${e.day}`),r.push(e.temp),o.includes(l)){const p=o.indexOf(l);a[p].push(parseFloat(e.temp))}else o.push(`${e.year}-${e.month}`),a.push([parseFloat(e.temp)])}const t=a.map(i=>{const e=i.reduce((l,p)=>l+p,0);return e/i.length});return{x:o,y:t}}function f(n,o){document.getElementById("plot");const a=[{name:"Between 0 and 15 째C",type:"scatter",x:n,y:o.map(t=>t<0?0:t>15?15:t),fill:"tozeroy",fillcolor:"rgba(161, 215, 106, 0.6)",mode:"none",line:{shape:"spline",smoothing:.25},hovertemplate:"%{y:.2f}"},{name:"More than 15 째C",type:"scatter",x:n,y:o.map(t=>t>15?t-15:0),fill:"tozeroy",fillcolor:"rgba(161, 215, 106, 1)",mode:"none",line:{shape:"spline",smoothing:.25},hovertemplate:"%{y:.2f}"},{name:"Less than 0 째C",type:"scatter",x:n,y:o.map(t=>t<0?t*-1:0),fill:"tozeroy",fillcolor:"rgba(5, 113, 176, 1)",mode:"none",line:{shape:"spline",smoothing:.25},hovertemplate:"-%{y:.2f}"}],s={title:"Average temperature in Oslo, Norway in 2018",xaxis:{title:"Month",tickformat:"%m",nticks:12},yaxis:{title:"Average temperature in 째C"},showlegend:!1},r={responsive:!0};return Plotly.newPlot("vis",a,s,r)}u();
