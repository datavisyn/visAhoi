import i from"../web_modules/echarts.js";import*as l from"../web_modules/d3.js";import{onboarding as m}from"../web_modules/onboarding-echarts.js";let s=null;function u(){l.csv("../data/oslo-2018.csv").then(r=>{const{x:e,y:a}=d(r),t=p(e,a);m("bar-chart",t)})}function d(r){const e=[],a=[];for(let t=0;t<r.length;t++){const n=r[t],o=`${n.year}-${n.month}`;e.includes(o)?a[e.indexOf(o)].push(parseFloat(n.temp)):(e.push(`${n.year}-${n.month}`),a.push([parseFloat(n.temp)]))}return{x:e,y:a.map(t=>{const n=t.reduce((o,c)=>o+c,0);return Math.round(n/t.length,2)})}}function p(r,e){const a={title:{text:"Average temperature in Oslo, Norway in 2018",left:"center"},tooltip:{},xAxis:{type:"category",name:"Month",nameLocation:"middle",nameGap:30,data:r,axisLabel:{formatter:function(t){return new Date(t).getMonth()+1}}},yAxis:{type:"value",name:"Average Temperature in Â°C",nameLocation:"middle",nameGap:35},series:[{data:e,type:"bar",color:"steelblue"}]};return s.setOption(a),s}const h=(r="svg")=>{const e=document.getElementById("vis");s=i.init(e,null,{renderer:r}),u()};export default h;
