import*as d from"../web_modules/echarts.js";import{ahoi as l,EVisualizationType as m}from"../web_modules/@visahoi/echarts.js";import{importCsv as u}from"./utils.js";let i=null;async function p(){const t=await u("../data/oslo-2018.csv"),{x:e,y:a}=h(t),r=y(e,a);window.addEventListener("resize",()=>l(m.BAR_CHART,r,"#onboarding")),l(m.BAR_CHART,r,"#onboarding")}function h(t){const e=[],a=[];for(let n=0;n<t.length;n++){const o=t[n],s=`${o.year}-${o.month}`;if(e.includes(s)){const c=e.indexOf(s);a[c].push(parseFloat(o.temp))}else e.push(`${o.year}-${o.month}`),a.push([parseFloat(o.temp)])}const r=a.map(n=>{const o=n.reduce((s,c)=>s+c,0);return Math.round(o/n.length,2)});return{x:e,y:r}}function y(t,e){const a={title:{text:"Average temperature in Oslo, Norway in 2018",left:"center"},tooltip:{},xAxis:{type:"category",name:"Month",nameLocation:"middle",nameGap:30,data:t,axisLabel:{formatter:function(r){var n=new Date(r);return n.getMonth()+1}}},yAxis:{type:"value",name:"Average Temperature in Â°C",nameLocation:"middle",nameGap:35},series:[{data:e,type:"bar",color:"lightgrey"}]};return i.setOption(a),i}const f=(t="svg")=>{const e=document.getElementById("vis");i=d.init(e,null,{renderer:t}),window.addEventListener("resize",()=>i.resize()),p()};export default f;
